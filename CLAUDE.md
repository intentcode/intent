# Codetale - Claude Code Guidelines

## Project Overview
Web viewer for intent-based code review. Displays code diffs alongside narrative explanations generated by coding agents.

## Vision
Replace traditional +/- diffs with human-readable explanations:
- **Why** the change was made, not just **what** changed
- **Decisions** captured at coding time
- **Risk assessment** to prioritize review effort

## Tech Stack
- React + TypeScript (Vite)
- Tailwind CSS (styling)
- React Markdown (render intent files)

## Project Structure
```
codetale/
├── src/
│   ├── components/
│   │   ├── DiffViewer.tsx      # Side-by-side diff display
│   │   ├── IntentPanel.tsx     # Intent narrative panel
│   │   └── ChunkMapper.tsx     # Maps diff hunks to intent chunks
│   ├── lib/
│   │   ├── parseIntent.ts      # Parse .intent.md files
│   │   └── parseDiff.ts        # Parse git diffs
│   └── App.tsx
├── spec/
│   └── format.md               # Intent format specification
├── examples/
│   └── cleaner.py.intent.md    # Example intent file
└── CLAUDE.md
```

## Intent Format
See `spec/format.md` for the full specification.

Quick overview:
```markdown
# filename.py

## 2024-01-11 14:30 | Session Title

### Recap
**Objectif:** What this accomplishes
**Risque:** Faible|Moyen|Élevé

### Chunks

#### L14-21 | Chunk Title
Description of the change
> Décision: Why this approach was chosen
```

## Development Commands
```bash
npm run dev      # Start dev server
npm run build    # Production build
npm run preview  # Preview production build
```

## MVP Features
1. [ ] Parse and display .intent.md files
2. [ ] Parse git diff output
3. [ ] Side-by-side view: diff | intent
4. [ ] Map chunks to diff hunks by line numbers
5. [ ] Syntax highlighting for code

## Future Features
- GitHub integration (fetch PRs)
- Multiple file navigation
- Search across intents
- Collaboration (comments, approvals)
